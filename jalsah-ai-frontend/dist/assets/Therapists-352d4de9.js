import{_ as M,u as B,m as T,f as R,p as A,g as V,z as F,c,a as t,t as s,i as b,l as w,F as $,s as k,x as g,A as N,o as d,q as j,h as C}from"./index-8434c12c.js";const L={name:"Therapists",setup(){const e=B(),n=T(),m=R(!0),l=R([]),u=A({specialization:"",priceRange:"",availability:"",sortBy:"rating"}),x=V(()=>{let o=[...l.value];if(u.specialization&&(o=o.filter(a=>{var p;return(p=a.diagnoses)==null?void 0:p.some(r=>r.name.toLowerCase().includes(u.specialization.toLowerCase()))})),u.priceRange){const[a,p]=u.priceRange.split("-").map(Number);o=o.filter(r=>{var v;const h=((v=r.price)==null?void 0:v.others)||0;return p?h>=a&&h<=p:h>=a})}return o.sort((a,p)=>{var r,h,v,z;switch(u.sortBy){case"rating":return i(p)-i(a);case"price_low":return(((r=a.price)==null?void 0:r.others)||0)-(((h=p.price)==null?void 0:h.others)||0);case"price_high":return(((v=p.price)==null?void 0:v.others)||0)-(((z=a.price)==null?void 0:z.others)||0);default:return 0}}),o}),i=o=>{if(!o.diagnoses||o.diagnoses.length===0)return 0;const a=o.diagnoses.filter(r=>r.rating&&!isNaN(r.rating)&&r.rating>0);return a.length===0?0:a.reduce((r,h)=>r+(h.rating||0),0)/a.length},f=async()=>{m.value=!0;try{const o=await N.get("/api/ai/therapists");l.value=o.data.data||[]}catch(o){n.error("Failed to load therapists"),console.error("Error loading therapists:",o)}finally{m.value=!1}},_=o=>{e.push(`/therapist/${o}`)},y=o=>{e.push(`/booking/${o}`)};return F(()=>{f()}),{loading:m,therapists:l,filters:u,filteredTherapists:x,getAverageRating:i,viewTherapist:_,bookAppointment:y}}},P=["dir"],S={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},U={class:"mb-8"},D={class:"text-3xl font-bold text-gray-900 mb-4"},H={class:"text-lg text-gray-600"},E={class:"card mb-8"},q={class:"grid md:grid-cols-4 gap-4"},I={class:"form-label"},G={value:""},J={value:"anxiety"},K={value:"depression"},O={value:"stress"},Q={value:"relationships"},W={value:"trauma"},X={value:"addiction"},Y={value:"eating"},Z={value:"sleep"},tt={class:"form-label"},et={value:""},st={value:"0-50"},it={value:"50-100"},ot={value:"100-150"},at={value:"150+"},lt={class:"form-label"},nt={value:""},rt={value:"morning"},ct={value:"afternoon"},dt={value:"evening"},pt={value:"weekend"},ht={class:"form-label"},ut={value:"rating"},gt={value:"price_low"},vt={value:"price_high"},mt={value:"availability"},ft={key:0,class:"text-center py-12"},_t={class:"text-gray-600"},yt={key:1,class:"grid md:grid-cols-2 lg:grid-cols-3 gap-6"},bt=["onClick"],wt={class:"relative mb-4"},$t=["src","alt"],kt={class:"absolute top-2 right-2 bg-primary-600 text-white px-2 py-1 rounded-full text-sm font-medium"},xt={class:"space-y-3"},zt={class:"text-xl font-semibold text-gray-900"},Rt={class:"flex text-yellow-400"},Ct={class:"text-sm text-gray-600"},Mt={class:"text-gray-600 text-sm line-clamp-2"},Bt={class:"flex flex-wrap gap-1"},Tt={key:0,class:"text-xs text-gray-500"},At={class:"flex items-center text-sm text-gray-600"},Vt=["onClick"],Ft=["onClick"],Nt={key:2,class:"text-center py-12"},jt={class:"text-lg font-medium text-gray-900 mb-2"},Lt={class:"text-gray-600"};function Pt(e,n,m,l,u,x){return d(),c("div",{dir:e.$i18n.locale==="ar"?"rtl":"ltr",class:g(e.$i18n.locale==="ar"?"rtl":"ltr")},[t("div",S,[t("div",U,[t("h1",D,s(e.$t("therapists.title")),1),t("p",H,s(e.$t("therapists.subtitle")),1)]),t("div",E,[t("div",q,[t("div",null,[t("label",I,s(e.$t("therapists.filters.specialization")),1),b(t("select",{"onUpdate:modelValue":n[0]||(n[0]=i=>l.filters.specialization=i),class:"input-field"},[t("option",G,s(e.$t("therapists.filters.allSpecializations")),1),t("option",J,s(e.$t("therapists.specializations.anxiety")),1),t("option",K,s(e.$t("therapists.specializations.depression")),1),t("option",O,s(e.$t("therapists.specializations.stress")),1),t("option",Q,s(e.$t("therapists.specializations.relationships")),1),t("option",W,s(e.$t("therapists.specializations.trauma")),1),t("option",X,s(e.$t("therapists.specializations.addiction")),1),t("option",Y,s(e.$t("therapists.specializations.eating")),1),t("option",Z,s(e.$t("therapists.specializations.sleep")),1)],512),[[w,l.filters.specialization]])]),t("div",null,[t("label",tt,s(e.$t("therapists.filters.priceRange")),1),b(t("select",{"onUpdate:modelValue":n[1]||(n[1]=i=>l.filters.priceRange=i),class:"input-field"},[t("option",et,s(e.$t("therapists.filters.anyPrice")),1),t("option",st,s(e.$t("therapists.priceRanges.0-50")),1),t("option",it,s(e.$t("therapists.priceRanges.50-100")),1),t("option",ot,s(e.$t("therapists.priceRanges.100-150")),1),t("option",at,s(e.$t("therapists.priceRanges.150+")),1)],512),[[w,l.filters.priceRange]])]),t("div",null,[t("label",lt,s(e.$t("therapists.filters.availability")),1),b(t("select",{"onUpdate:modelValue":n[2]||(n[2]=i=>l.filters.availability=i),class:"input-field"},[t("option",nt,s(e.$t("therapists.filters.anyTime")),1),t("option",rt,s(e.$t("therapists.availability.morning")),1),t("option",ct,s(e.$t("therapists.availability.afternoon")),1),t("option",dt,s(e.$t("therapists.availability.evening")),1),t("option",pt,s(e.$t("therapists.availability.weekend")),1)],512),[[w,l.filters.availability]])]),t("div",null,[t("label",ht,s(e.$t("therapists.filters.sortBy")),1),b(t("select",{"onUpdate:modelValue":n[3]||(n[3]=i=>l.filters.sortBy=i),class:"input-field"},[t("option",ut,s(e.$t("therapists.filters.highestRated")),1),t("option",gt,s(e.$t("therapists.filters.lowestPrice")),1),t("option",vt,s(e.$t("therapists.filters.highestPrice")),1),t("option",mt,s(e.$t("therapists.filters.mostAvailable")),1)],512),[[w,l.filters.sortBy]])])])]),l.loading?(d(),c("div",ft,[n[4]||(n[4]=t("svg",{class:"animate-spin h-12 w-12 text-primary-600 mx-auto mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),t("p",_t,s(e.$t("therapists.loading")),1)])):l.filteredTherapists.length>0?(d(),c("div",yt,[(d(!0),c($,null,k(l.filteredTherapists,i=>{var f,_,y,o;return d(),c("div",{key:i.id,class:"card hover:shadow-lg transition-shadow cursor-pointer",onClick:a=>l.viewTherapist(i.id)},[t("div",wt,[t("img",{src:i.photo||"/default-therapist.svg",alt:i.name,class:g(["w-full h-48 rounded-lg",i.photo?"object-cover":"object-contain bg-gray-100 p-4"])},null,10,$t),t("div",kt,s(((f=i.price)==null?void 0:f.others)||e.$t("common.contact")),1)]),t("div",xt,[t("h3",zt,s(i.name),1),t("div",{class:g(["flex items-center",e.$i18n.locale==="ar"?"space-x-reverse space-x-2":"space-x-2"])},[t("div",Rt,[(d(),c($,null,k(5,a=>t("svg",{key:a,class:g(["w-4 h-4",a<=l.getAverageRating(i)?"fill-current":"fill-gray-300"]),viewBox:"0 0 20 20"},n[5]||(n[5]=[t("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"},null,-1)]),2)),64))]),t("span",Ct,s(l.getAverageRating(i).toFixed(1))+" ("+s(((_=i.diagnoses)==null?void 0:_.length)||0)+" reviews)",1)],2),t("p",Mt,s(i.bio||e.$t("therapists.bioDefault")),1),t("div",Bt,[(d(!0),c($,null,k((y=i.diagnoses)==null?void 0:y.slice(0,3),a=>(d(),c("span",{key:a.id,class:"bg-primary-100 text-primary-800 text-xs px-2 py-1 rounded-full"},s(a.name),1))),128)),((o=i.diagnoses)==null?void 0:o.length)>3?(d(),c("span",Tt,s(e.$t("therapists.more",{count:i.diagnoses.length-3})),1)):j("",!0)]),t("div",At,[(d(),c("svg",{class:g(["w-4 h-4",e.$i18n.locale==="ar"?"ml-1":"mr-1"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n[6]||(n[6]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]),2)),t("span",null,s(e.$t("therapists.nextAvailable",{time:i.earliest_slot||e.$t("therapists.contactForAvailability")})),1)]),t("div",{class:g(["flex pt-2",e.$i18n.locale==="ar"?"space-x-reverse space-x-2":"space-x-2"])},[t("button",{onClick:C(a=>l.bookAppointment(i.id),["stop"]),class:"flex-1 btn-primary text-sm py-2"},s(e.$t("therapists.bookSession")),9,Vt),t("button",{onClick:C(a=>l.viewTherapist(i.id),["stop"]),class:"btn-outline text-sm py-2"},s(e.$t("therapists.viewProfile")),9,Ft)],2)])],8,bt)}),128))])):(d(),c("div",Nt,[n[7]||(n[7]=t("svg",{class:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),t("h3",jt,s(e.$t("therapists.noResults")),1),t("p",Lt,s(e.$t("therapists.noResultsMessage")),1)]))])],10,P)}const Ut=M(L,[["render",Pt],["__scopeId","data-v-5d847214"]]);export{Ut as default};
