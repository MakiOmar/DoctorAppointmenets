import{_ as C,u as k,m as w,B as P,f as h,g as x,c as a,a as t,F as T,q as F,t as l,i as S,v as I,p as g,d as f,o as n,y as j}from"./index-582b6513.js";const B={name:"Cart",setup(){const p=k(),o=w(),y=P(),e=h(!1),d=h(""),c=h(null),s=x(()=>y.items),i=x(()=>s.value.reduce((r,_)=>r+_.price,0)),m=x(()=>s.value.length*5),u=x(()=>{let r=i.value+m.value;return c.value&&(r-=c.value.discount),Math.max(0,r)});return{cartItems:s,subtotal:i,platformFee:m,total:u,checkoutLoading:e,promoCode:d,appliedPromo:c,removeFromCart:r=>{y.removeFromCart(r),o.success("Item removed from cart")},applyPromoCode:async()=>{if(d.value)try{d.value.toLowerCase()==="welcome10"?(c.value={code:d.value,discount:Math.round(i.value*.1)},o.success("Promo code applied successfully!")):o.error("Invalid promo code")}catch{o.error("Failed to apply promo code")}},proceedToCheckout:async()=>{e.value=!0;try{await new Promise(r=>setTimeout(r,2e3)),o.success("Redirecting to payment..."),p.push("/checkout")}catch{o.error("Failed to proceed to checkout")}finally{e.value=!1}}}}},M={class:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},L={key:0,class:"text-center py-12"},V={key:1,class:"grid lg:grid-cols-3 gap-8"},H={class:"lg:col-span-2"},N={class:"card"},z={class:"space-y-6"},A=["src","alt"],D={class:"flex-1"},R={class:"font-semibold text-gray-900"},E={class:"text-sm text-gray-600 mb-2"},O={class:"text-sm text-gray-600"},Y={key:0,class:"mt-2"},q={class:"text-sm text-gray-600"},U={class:"text-right"},G={class:"text-lg font-semibold text-gray-900 mb-2"},J=["onClick"],K={class:"lg:col-span-1"},Q={class:"card sticky top-8"},W={class:"space-y-3 mb-6"},X={class:"flex justify-between"},Z={class:"text-gray-600"},$={class:"font-medium"},tt={class:"flex justify-between"},ot={class:"font-medium"},st={class:"flex justify-between text-lg font-semibold border-t border-gray-200 pt-3"},et={class:"mb-6"},lt={class:"flex space-x-2"},rt=["disabled"],at={key:0,class:"mt-2 text-sm text-green-600"},nt=["disabled"],it={key:0,class:"flex items-center justify-center"},dt={key:1};function ct(p,o,y,e,d,c){return n(),a("div",null,[t("div",M,[o[15]||(o[15]=t("h1",{class:"text-3xl font-bold text-gray-900 mb-8"},"Your Cart",-1)),e.cartItems.length===0?(n(),a("div",L,[o[5]||(o[5]=t("svg",{class:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m6-5v6a2 2 0 01-2 2H9a2 2 0 01-2-2v-6m8 0V9a2 2 0 00-2-2H9a2 2 0 00-2 2v4.01"})],-1)),o[6]||(o[6]=t("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Your cart is empty",-1)),o[7]||(o[7]=t("p",{class:"text-gray-600 mb-6"},"Start by browsing our therapists and adding sessions to your cart.",-1)),t("button",{onClick:o[0]||(o[0]=s=>p.$router.push("/therapists")),class:"btn-primary"}," Browse Therapists ")])):(n(),a("div",V,[t("div",H,[t("div",N,[t("div",z,[(n(!0),a(T,null,F(e.cartItems,s=>{var i,m,u,v;return n(),a("div",{key:s.id,class:"flex items-start space-x-4 p-4 border border-gray-200 rounded-lg"},[t("img",{src:((i=s.therapist)==null?void 0:i.photo)||"/default-therapist.svg",alt:(m=s.therapist)==null?void 0:m.name,class:j(["w-20 h-20 rounded-lg",(u=s.therapist)!=null&&u.photo?"object-cover":"object-contain bg-gray-100 p-2"])},null,10,A),t("div",D,[t("h3",R,l((v=s.therapist)==null?void 0:v.name),1),t("p",E,l(s.sessionType)+"-minute session",1),t("p",O,"Date: "+l(s.date)+" at "+l(s.time),1),s.notes?(n(),a("div",Y,[t("p",q,[o[8]||(o[8]=t("span",{class:"font-medium"},"Notes:",-1)),f(" "+l(s.notes),1)])])):g("",!0)]),t("div",U,[t("div",G," $"+l(s.price),1),t("button",{onClick:b=>e.removeFromCart(s.id),class:"text-red-600 hover:text-red-700 text-sm font-medium"}," Remove ",8,J)])])}),128))])])]),t("div",K,[t("div",Q,[o[13]||(o[13]=t("h2",{class:"text-xl font-semibold text-gray-900 mb-4"},"Order Summary",-1)),t("div",W,[t("div",X,[t("span",Z,"Sessions ("+l(e.cartItems.length)+")",1),t("span",$,"$"+l(e.subtotal),1)]),t("div",tt,[o[9]||(o[9]=t("span",{class:"text-gray-600"},"Platform Fee",-1)),t("span",ot,"$"+l(e.platformFee),1)]),t("div",st,[o[10]||(o[10]=t("span",null,"Total",-1)),t("span",null,"$"+l(e.total),1)])]),t("div",et,[o[11]||(o[11]=t("label",{class:"form-label"},"Promo Code (Optional)",-1)),t("div",lt,[S(t("input",{"onUpdate:modelValue":o[1]||(o[1]=s=>e.promoCode=s),type:"text",class:"input-field flex-1",placeholder:"Enter code"},null,512),[[I,e.promoCode]]),t("button",{onClick:o[2]||(o[2]=(...s)=>e.applyPromoCode&&e.applyPromoCode(...s)),disabled:!e.promoCode,class:"btn-outline px-4"}," Apply ",8,rt)]),e.appliedPromo?(n(),a("div",at," Promo code applied: "+l(e.appliedPromo.code)+" (-$"+l(e.appliedPromo.discount)+") ",1)):g("",!0)]),t("button",{onClick:o[3]||(o[3]=(...s)=>e.proceedToCheckout&&e.proceedToCheckout(...s)),disabled:e.checkoutLoading,class:"w-full btn-primary text-lg py-3"},[e.checkoutLoading?(n(),a("span",it,o[12]||(o[12]=[t("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),f(" Processing... ")]))):(n(),a("span",dt,"Proceed to Checkout"))],8,nt),t("button",{onClick:o[4]||(o[4]=s=>p.$router.push("/therapists")),class:"w-full btn-outline mt-3"}," Continue Shopping "),o[14]||(o[14]=t("div",{class:"mt-6 p-4 bg-blue-50 rounded-lg"},[t("h4",{class:"font-medium text-blue-900 mb-2"},"Important Information"),t("ul",{class:"text-sm text-blue-800 space-y-1"},[t("li",null,"• All sessions are conducted online"),t("li",null,"• 24-hour cancellation policy applies"),t("li",null,"• Secure payment processing"),t("li",null,"• Sessions are non-refundable")])],-1))])])]))])])}const ut=C(B,[["render",ct]]);export{ut as default};
