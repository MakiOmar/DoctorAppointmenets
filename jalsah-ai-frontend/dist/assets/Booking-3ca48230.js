import{_ as j,B as V,u as N,m as z,f as g,g as D,z as A,c as a,a as e,d as y,h as U,i as n,l as M,v as b,k as q,j as E,x as F,t as r,A as T,o as d}from"./index-8434c12c.js";const H={name:"Booking",setup(){const p=V(),t=N(),m=z(),o=g(!0),u=g(!1),l=g(null),s=g({sessionType:"",date:"",time:"",notes:"",emergencyName:"",emergencyPhone:"",agreeTerms:!1}),P=D(()=>new Date().toISOString().split("T")[0]),v=()=>{var c,f,x,k,h,w;if(!s.value.sessionType)return 0;const i={45:((f=(c=l.value)==null?void 0:c.price)==null?void 0:f.others)||100,60:(((k=(x=l.value)==null?void 0:x.price)==null?void 0:k.others)||100)*1.33,90:(((w=(h=l.value)==null?void 0:h.price)==null?void 0:w.others)||100)*2};return Math.round(i[s.value.sessionType])},S=()=>v()+5,B=async()=>{o.value=!0;try{const i=await T.get(`/api/ai/therapists/${p.params.id}`);l.value=i.data.data}catch(i){m.error("Failed to load therapist information"),console.error("Error loading therapist:",i)}finally{o.value=!1}},C=async()=>{u.value=!0;try{const i={therapist_id:p.params.id,session_type:s.value.sessionType,date:s.value.date,time:s.value.time,notes:s.value.notes,emergency_contact:{name:s.value.emergencyName,phone:s.value.emergencyPhone}},c=await T.post("/api/ai/bookings",i);m.success("Booking submitted successfully!"),t.push(`/booking/confirmation/${c.data.data.id}`)}catch(i){m.error("Failed to submit booking. Please try again."),console.error("Error submitting booking:",i)}finally{u.value=!1}};return A(()=>{B()}),{loading:o,submitting:u,therapist:l,booking:s,minDate:P,getSessionPrice:v,getTotalPrice:S,submitBooking:C}}},I={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},O={key:0,class:"text-center py-12"},L={key:1,class:"grid lg:grid-cols-3 gap-8"},R={class:"lg:col-span-2"},Y={class:"card"},G=["min"],J={class:"grid md:grid-cols-2 gap-4"},K={class:"flex items-start space-x-3"},Q=["disabled"],W={key:0,class:"flex items-center justify-center"},X={key:1},Z={class:"lg:col-span-1"},_={class:"card sticky top-8"},$={class:"flex items-center space-x-4 mb-6"},ee=["src","alt"],te={class:"font-semibold text-gray-900"},oe={class:"space-y-4 mb-6"},se={class:"flex justify-between"},ie={class:"font-medium"},ne={class:"flex justify-between"},le={class:"font-medium"},ae={class:"flex justify-between"},re={class:"font-medium"},de={class:"border-t border-gray-200 pt-4"},pe={class:"flex justify-between mb-2"},me={class:"font-medium"},ue={class:"flex justify-between text-lg font-semibold border-t border-gray-200 pt-2"},ce={key:2,class:"text-center py-12"};function ge(p,t,m,o,u,l){return d(),a("div",null,[e("div",I,[e("button",{onClick:t[0]||(t[0]=s=>p.$router.go(-1)),class:"flex items-center text-primary-600 hover:text-primary-700 mb-6"},t[10]||(t[10]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),y(" Back ")])),o.loading?(d(),a("div",O,t[11]||(t[11]=[e("svg",{class:"animate-spin h-12 w-12 text-primary-600 mx-auto mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e("p",{class:"text-gray-600"},"Loading booking information...",-1)]))):o.therapist?(d(),a("div",L,[e("div",R,[e("div",Y,[t[21]||(t[21]=e("h1",{class:"text-2xl font-bold text-gray-900 mb-6"},"Book Your Session",-1)),e("form",{onSubmit:t[8]||(t[8]=U((...s)=>o.submitBooking&&o.submitBooking(...s),["prevent"])),class:"space-y-6"},[e("div",null,[t[13]||(t[13]=e("label",{class:"form-label"},"Session Type",-1)),n(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>o.booking.sessionType=s),class:"input-field",required:""},t[12]||(t[12]=[e("option",{value:""},"Select session type",-1),e("option",{value:"45"},"45-Minute Session",-1),e("option",{value:"60"},"60-Minute Session",-1),e("option",{value:"90"},"90-Minute Session",-1)]),512),[[M,o.booking.sessionType]])]),e("div",null,[t[14]||(t[14]=e("label",{class:"form-label"},"Preferred Date",-1)),n(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>o.booking.date=s),type:"date",class:"input-field",min:o.minDate,required:""},null,8,G),[[b,o.booking.date]])]),e("div",null,[t[16]||(t[16]=e("label",{class:"form-label"},"Preferred Time",-1)),n(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>o.booking.time=s),class:"input-field",required:""},t[15]||(t[15]=[q('<option value="">Select time</option><option value="09:00">9:00 AM</option><option value="10:00">10:00 AM</option><option value="11:00">11:00 AM</option><option value="12:00">12:00 PM</option><option value="13:00">1:00 PM</option><option value="14:00">2:00 PM</option><option value="15:00">3:00 PM</option><option value="16:00">4:00 PM</option><option value="17:00">5:00 PM</option><option value="18:00">6:00 PM</option>',11)]),512),[[M,o.booking.time]])]),e("div",null,[t[17]||(t[17]=e("label",{class:"form-label"},"Session Notes (Optional)",-1)),n(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=s=>o.booking.notes=s),rows:"4",class:"input-field",placeholder:"Any specific topics or concerns you'd like to discuss..."},null,512),[[b,o.booking.notes]])]),e("div",null,[t[18]||(t[18]=e("label",{class:"form-label"},"Emergency Contact (Optional)",-1)),e("div",J,[n(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>o.booking.emergencyName=s),type:"text",class:"input-field",placeholder:"Contact name"},null,512),[[b,o.booking.emergencyName]]),n(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>o.booking.emergencyPhone=s),type:"tel",class:"input-field",placeholder:"Contact phone"},null,512),[[b,o.booking.emergencyPhone]])])]),e("div",K,[n(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>o.booking.agreeTerms=s),type:"checkbox",class:"mt-1 h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded",required:""},null,512),[[E,o.booking.agreeTerms]]),t[19]||(t[19]=e("label",{class:"text-sm text-gray-700"},[y(" I agree to the "),e("a",{href:"#",class:"text-primary-600 hover:text-primary-700"},"terms and conditions"),y(" and understand that this is a professional therapy session. ")],-1))]),e("button",{type:"submit",disabled:o.submitting,class:"w-full btn-primary text-lg py-3"},[o.submitting?(d(),a("span",W,t[20]||(t[20]=[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),y(" Processing... ")]))):(d(),a("span",X,"Book Session"))],8,Q)],32)])]),e("div",Z,[e("div",_,[t[29]||(t[29]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-4"},"Booking Summary",-1)),e("div",$,[e("img",{src:o.therapist.photo||"/default-therapist.svg",alt:o.therapist.name,class:F(["w-16 h-16 rounded-full",o.therapist.photo?"object-cover":"object-contain bg-gray-100 p-1"])},null,10,ee),e("div",null,[e("h3",te,r(o.therapist.name),1),t[22]||(t[22]=e("p",{class:"text-sm text-gray-600"},"Licensed Therapist",-1))])]),e("div",oe,[e("div",se,[t[23]||(t[23]=e("span",{class:"text-gray-600"},"Session Type:",-1)),e("span",ie,r(o.booking.sessionType||"Not selected")+" minutes",1)]),e("div",ne,[t[24]||(t[24]=e("span",{class:"text-gray-600"},"Date:",-1)),e("span",le,r(o.booking.date||"Not selected"),1)]),e("div",ae,[t[25]||(t[25]=e("span",{class:"text-gray-600"},"Time:",-1)),e("span",re,r(o.booking.time||"Not selected"),1)])]),e("div",de,[e("div",pe,[t[26]||(t[26]=e("span",{class:"text-gray-600"},"Session Fee:",-1)),e("span",me,"$"+r(o.getSessionPrice()),1)]),t[28]||(t[28]=e("div",{class:"flex justify-between mb-2"},[e("span",{class:"text-gray-600"},"Platform Fee:"),e("span",{class:"font-medium"},"$5.00")],-1)),e("div",ue,[t[27]||(t[27]=e("span",null,"Total:",-1)),e("span",null,"$"+r(o.getTotalPrice()),1)])]),t[30]||(t[30]=e("div",{class:"mt-6 p-4 bg-blue-50 rounded-lg"},[e("h4",{class:"font-medium text-blue-900 mb-2"},"Important Information"),e("ul",{class:"text-sm text-blue-800 space-y-1"},[e("li",null,"• Sessions are conducted via secure video call"),e("li",null,"• Please join 5 minutes before your scheduled time"),e("li",null,"• Cancellation policy: 24 hours notice required"),e("li",null,"• Payment is processed securely")])],-1))])])])):(d(),a("div",ce,[t[31]||(t[31]=e("svg",{class:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),t[32]||(t[32]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Therapist not found",-1)),t[33]||(t[33]=e("p",{class:"text-gray-600"},"The therapist you're trying to book with doesn't exist or has been removed.",-1)),e("button",{onClick:t[9]||(t[9]=s=>p.$router.push("/therapists")),class:"btn-primary mt-4"}," Browse Therapists ")]))])])}const be=j(H,[["render",ge]]);export{be as default};
