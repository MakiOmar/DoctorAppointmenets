import{_ as A,u as U,m as B,e as D,f as u,y as S,c as i,a as s,h as b,i as a,v as r,d as x,t as P,z as g,o as d}from"./index-7da7b438.js";const M={name:"Profile",setup(){const m=U(),e=B(),y=D(),t=u(!0),f=u(!1),c=u(!1),l=u({firstName:"",lastName:"",email:"",phone:"",dateOfBirth:"",emergencyName:"",emergencyPhone:"",address:"",createdAt:"",totalSessions:0}),p=u({current:"",new:"",confirm:""}),h=async()=>{var o,w;t.value=!0;try{const n=(await g.get("/api/ai/profile")).data.data;l.value={firstName:n.first_name||"",lastName:n.last_name||"",email:n.email||"",phone:n.phone||"",dateOfBirth:n.date_of_birth||"",emergencyName:((o=n.emergency_contact)==null?void 0:o.name)||"",emergencyPhone:((w=n.emergency_contact)==null?void 0:w.phone)||"",address:n.address||"",createdAt:n.created_at||"",totalSessions:n.total_sessions||0}}catch(v){e.error("Failed to load profile"),console.error("Error loading profile:",v)}finally{t.value=!1}},N=async()=>{f.value=!0;try{const o={first_name:l.value.firstName,last_name:l.value.lastName,email:l.value.email,phone:l.value.phone,date_of_birth:l.value.dateOfBirth,emergency_contact:{name:l.value.emergencyName,phone:l.value.emergencyPhone},address:l.value.address};await g.put("/api/ai/profile",o),e.success("Profile updated successfully!")}catch(o){e.error("Failed to update profile"),console.error("Error updating profile:",o)}finally{f.value=!1}},C=async()=>{if(p.value.new!==p.value.confirm){e.error("New passwords do not match");return}c.value=!0;try{const o={current_password:p.value.current,new_password:p.value.new};await g.put("/api/ai/profile/password",o),e.success("Password changed successfully!"),p.value={current:"",new:"",confirm:""}}catch(o){e.error("Failed to change password"),console.error("Error changing password:",o)}finally{c.value=!1}},k=()=>{y.logout(),m.push("/login"),e.success("Logged out successfully")},V=o=>o?new Date(o).toLocaleDateString():"N/A";return S(()=>{h()}),{loading:t,updating:f,changingPassword:c,profile:l,password:p,updateProfile:N,changePassword:C,logout:k,formatDate:V}}},z={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},q={key:0,class:"text-center py-12"},E={key:1,class:"grid md:grid-cols-3 gap-8"},j={class:"md:col-span-2"},L={class:"card"},O={class:"grid md:grid-cols-2 gap-4"},T={class:"grid md:grid-cols-2 gap-4"},F={class:"flex justify-end"},H=["disabled"],I={key:0,class:"flex items-center"},Q={key:1},R={class:"card mt-8"},Y={class:"flex justify-end"},G=["disabled"],J={key:0,class:"flex items-center"},K={key:1},W={class:"md:col-span-1"},X={class:"card mb-6"},Z={class:"space-y-3"},_={class:"flex justify-between"},$={class:"font-medium"},ee={class:"flex justify-between"},se={class:"font-medium"},te={class:"card"},le={class:"space-y-3"};function oe(m,e,y,t,f,c){return d(),i("div",null,[s("div",z,[e[36]||(e[36]=s("h1",{class:"text-3xl font-bold text-gray-900 mb-8"},"My Profile",-1)),t.loading?(d(),i("div",q,e[16]||(e[16]=[s("svg",{class:"animate-spin h-12 w-12 text-primary-600 mx-auto mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),s("p",{class:"text-gray-600"},"Loading profile...",-1)]))):(d(),i("div",E,[s("div",j,[s("div",L,[e[25]||(e[25]=s("h2",{class:"text-xl font-semibold text-gray-900 mb-6"},"Personal Information",-1)),s("form",{onSubmit:e[8]||(e[8]=b((...l)=>t.updateProfile&&t.updateProfile(...l),["prevent"])),class:"space-y-6"},[s("div",O,[s("div",null,[e[17]||(e[17]=s("label",{class:"form-label"},"First Name",-1)),a(s("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>t.profile.firstName=l),type:"text",class:"input-field",required:""},null,512),[[r,t.profile.firstName]])]),s("div",null,[e[18]||(e[18]=s("label",{class:"form-label"},"Last Name",-1)),a(s("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>t.profile.lastName=l),type:"text",class:"input-field",required:""},null,512),[[r,t.profile.lastName]])])]),s("div",null,[e[19]||(e[19]=s("label",{class:"form-label"},"Email",-1)),a(s("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>t.profile.email=l),type:"email",class:"input-field",required:""},null,512),[[r,t.profile.email]])]),s("div",null,[e[20]||(e[20]=s("label",{class:"form-label"},"Phone Number",-1)),a(s("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>t.profile.phone=l),type:"tel",class:"input-field"},null,512),[[r,t.profile.phone]])]),s("div",null,[e[21]||(e[21]=s("label",{class:"form-label"},"Date of Birth",-1)),a(s("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>t.profile.dateOfBirth=l),type:"date",class:"input-field"},null,512),[[r,t.profile.dateOfBirth]])]),s("div",null,[e[22]||(e[22]=s("label",{class:"form-label"},"Emergency Contact",-1)),s("div",T,[a(s("input",{"onUpdate:modelValue":e[5]||(e[5]=l=>t.profile.emergencyName=l),type:"text",class:"input-field",placeholder:"Contact name"},null,512),[[r,t.profile.emergencyName]]),a(s("input",{"onUpdate:modelValue":e[6]||(e[6]=l=>t.profile.emergencyPhone=l),type:"tel",class:"input-field",placeholder:"Contact phone"},null,512),[[r,t.profile.emergencyPhone]])])]),s("div",null,[e[23]||(e[23]=s("label",{class:"form-label"},"Address",-1)),a(s("textarea",{"onUpdate:modelValue":e[7]||(e[7]=l=>t.profile.address=l),rows:"3",class:"input-field",placeholder:"Your address"},null,512),[[r,t.profile.address]])]),s("div",F,[s("button",{type:"submit",disabled:t.updating,class:"btn-primary"},[t.updating?(d(),i("span",I,e[24]||(e[24]=[s("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),x(" Updating... ")]))):(d(),i("span",Q,"Update Profile"))],8,H)])],32)]),s("div",R,[e[30]||(e[30]=s("h2",{class:"text-xl font-semibold text-gray-900 mb-6"},"Change Password",-1)),s("form",{onSubmit:e[12]||(e[12]=b((...l)=>t.changePassword&&t.changePassword(...l),["prevent"])),class:"space-y-6"},[s("div",null,[e[26]||(e[26]=s("label",{class:"form-label"},"Current Password",-1)),a(s("input",{"onUpdate:modelValue":e[9]||(e[9]=l=>t.password.current=l),type:"password",class:"input-field",required:""},null,512),[[r,t.password.current]])]),s("div",null,[e[27]||(e[27]=s("label",{class:"form-label"},"New Password",-1)),a(s("input",{"onUpdate:modelValue":e[10]||(e[10]=l=>t.password.new=l),type:"password",class:"input-field",required:""},null,512),[[r,t.password.new]])]),s("div",null,[e[28]||(e[28]=s("label",{class:"form-label"},"Confirm New Password",-1)),a(s("input",{"onUpdate:modelValue":e[11]||(e[11]=l=>t.password.confirm=l),type:"password",class:"input-field",required:""},null,512),[[r,t.password.confirm]])]),s("div",Y,[s("button",{type:"submit",disabled:t.changingPassword,class:"btn-outline"},[t.changingPassword?(d(),i("span",J,e[29]||(e[29]=[s("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-primary-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),x(" Changing... ")]))):(d(),i("span",K,"Change Password"))],8,G)])],32)])]),s("div",W,[s("div",X,[e[34]||(e[34]=s("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Account Summary",-1)),s("div",Z,[s("div",_,[e[31]||(e[31]=s("span",{class:"text-gray-600"},"Member since:",-1)),s("span",$,P(t.formatDate(t.profile.createdAt)),1)]),s("div",ee,[e[32]||(e[32]=s("span",{class:"text-gray-600"},"Total sessions:",-1)),s("span",se,P(t.profile.totalSessions||0),1)]),e[33]||(e[33]=s("div",{class:"flex justify-between"},[s("span",{class:"text-gray-600"},"Account status:"),s("span",{class:"font-medium text-green-600"},"Active")],-1))])]),s("div",te,[e[35]||(e[35]=s("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Quick Actions",-1)),s("div",le,[s("button",{onClick:e[13]||(e[13]=l=>m.$router.push("/appointments")),class:"w-full btn-outline text-left"}," View Appointments "),s("button",{onClick:e[14]||(e[14]=l=>m.$router.push("/diagnosis")),class:"w-full btn-outline text-left"}," Take AI Diagnosis "),s("button",{onClick:e[15]||(e[15]=(...l)=>t.logout&&t.logout(...l)),class:"w-full btn-outline text-left text-red-600 hover:text-red-700"}," Logout ")])])])]))])])}const re=A(M,[["render",oe]]);export{re as default};
