import{_ as M,u as B,m as T,f as R,n as A,g as V,y as F,c,a as t,t as e,i as y,l as b,F as w,q as $,s as k,z as N,o as p,p as j,h as C}from"./index-7da7b438.js";const L={name:"Therapists",setup(){const s=B(),n=T(),v=R(!0),l=R([]),g=A({specialization:"",priceRange:"",availability:"",sortBy:"rating"}),x=V(()=>{let o=[...l.value];if(g.specialization&&(o=o.filter(a=>{var d;return(d=a.diagnoses)==null?void 0:d.some(r=>r.name.toLowerCase().includes(g.specialization.toLowerCase()))})),g.priceRange){const[a,d]=g.priceRange.split("-").map(Number);o=o.filter(r=>{var u;const h=((u=r.price)==null?void 0:u.others)||0;return d?h>=a&&h<=d:h>=a})}return o.sort((a,d)=>{var r,h,u,z;switch(g.sortBy){case"rating":return i(d)-i(a);case"price_low":return(((r=a.price)==null?void 0:r.others)||0)-(((h=d.price)==null?void 0:h.others)||0);case"price_high":return(((u=d.price)==null?void 0:u.others)||0)-(((z=a.price)==null?void 0:z.others)||0);default:return 0}}),o}),i=o=>{if(!o.diagnoses||o.diagnoses.length===0)return 0;const a=o.diagnoses.filter(r=>r.rating&&!isNaN(r.rating)&&r.rating>0);return a.length===0?0:a.reduce((r,h)=>r+(h.rating||0),0)/a.length},_=async()=>{v.value=!0;try{const o=await N.get("/api/ai/therapists");l.value=o.data.data||[]}catch(o){n.error("Failed to load therapists"),console.error("Error loading therapists:",o)}finally{v.value=!1}},m=o=>{s.push(`/therapist/${o}`)},f=o=>{s.push(`/booking/${o}`)};return F(()=>{_()}),{loading:v,therapists:l,filters:g,filteredTherapists:x,getAverageRating:i,viewTherapist:m,bookAppointment:f}}},P=["dir"],S={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},U={class:"mb-8"},D={class:"text-3xl font-bold text-gray-900 mb-4"},H={class:"text-lg text-gray-600"},E={class:"card mb-8"},q={class:"grid md:grid-cols-4 gap-4"},I={class:"form-label"},G={value:""},J={value:"anxiety"},K={value:"depression"},O={value:"stress"},Q={value:"relationships"},W={value:"trauma"},X={value:"addiction"},Y={value:"eating"},Z={value:"sleep"},tt={class:"form-label"},st={value:""},et={value:"0-50"},it={value:"50-100"},ot={value:"100-150"},at={value:"150+"},lt={class:"form-label"},nt={value:""},rt={value:"morning"},dt={value:"afternoon"},ct={value:"evening"},pt={value:"weekend"},ht={class:"form-label"},gt={value:"rating"},ut={value:"price_low"},vt={value:"price_high"},_t={value:"availability"},mt={key:0,class:"text-center py-12"},ft={class:"text-gray-600"},yt={key:1,class:"grid md:grid-cols-2 lg:grid-cols-3 gap-6"},bt=["onClick"],wt={class:"relative mb-4"},$t=["src","alt"],kt={class:"absolute top-2 right-2 bg-primary-600 text-white px-2 py-1 rounded-full text-sm font-medium"},xt={class:"space-y-3"},zt={class:"text-xl font-semibold text-gray-900"},Rt={class:"flex items-center space-x-2"},Ct={class:"flex text-yellow-400"},Mt={class:"text-sm text-gray-600"},Bt={class:"text-gray-600 text-sm line-clamp-2"},Tt={class:"flex flex-wrap gap-1"},At={key:0,class:"text-xs text-gray-500"},Vt={class:"flex items-center text-sm text-gray-600"},Ft={class:"flex space-x-2 pt-2"},Nt=["onClick"],jt=["onClick"],Lt={key:2,class:"text-center py-12"},Pt={class:"text-lg font-medium text-gray-900 mb-2"},St={class:"text-gray-600"};function Ut(s,n,v,l,g,x){return p(),c("div",{dir:s.$i18n.locale==="ar"?"rtl":"ltr",class:k(s.$i18n.locale==="ar"?"rtl":"ltr")},[t("div",S,[t("div",U,[t("h1",D,e(s.$t("therapists.title")),1),t("p",H,e(s.$t("therapists.subtitle")),1)]),t("div",E,[t("div",q,[t("div",null,[t("label",I,e(s.$t("therapists.filters.specialization")),1),y(t("select",{"onUpdate:modelValue":n[0]||(n[0]=i=>l.filters.specialization=i),class:"input-field"},[t("option",G,e(s.$t("therapists.filters.allSpecializations")),1),t("option",J,e(s.$t("therapists.specializations.anxiety")),1),t("option",K,e(s.$t("therapists.specializations.depression")),1),t("option",O,e(s.$t("therapists.specializations.stress")),1),t("option",Q,e(s.$t("therapists.specializations.relationships")),1),t("option",W,e(s.$t("therapists.specializations.trauma")),1),t("option",X,e(s.$t("therapists.specializations.addiction")),1),t("option",Y,e(s.$t("therapists.specializations.eating")),1),t("option",Z,e(s.$t("therapists.specializations.sleep")),1)],512),[[b,l.filters.specialization]])]),t("div",null,[t("label",tt,e(s.$t("therapists.filters.priceRange")),1),y(t("select",{"onUpdate:modelValue":n[1]||(n[1]=i=>l.filters.priceRange=i),class:"input-field"},[t("option",st,e(s.$t("therapists.filters.anyPrice")),1),t("option",et,e(s.$t("therapists.priceRanges.0-50")),1),t("option",it,e(s.$t("therapists.priceRanges.50-100")),1),t("option",ot,e(s.$t("therapists.priceRanges.100-150")),1),t("option",at,e(s.$t("therapists.priceRanges.150+")),1)],512),[[b,l.filters.priceRange]])]),t("div",null,[t("label",lt,e(s.$t("therapists.filters.availability")),1),y(t("select",{"onUpdate:modelValue":n[2]||(n[2]=i=>l.filters.availability=i),class:"input-field"},[t("option",nt,e(s.$t("therapists.filters.anyTime")),1),t("option",rt,e(s.$t("therapists.availability.morning")),1),t("option",dt,e(s.$t("therapists.availability.afternoon")),1),t("option",ct,e(s.$t("therapists.availability.evening")),1),t("option",pt,e(s.$t("therapists.availability.weekend")),1)],512),[[b,l.filters.availability]])]),t("div",null,[t("label",ht,e(s.$t("therapists.filters.sortBy")),1),y(t("select",{"onUpdate:modelValue":n[3]||(n[3]=i=>l.filters.sortBy=i),class:"input-field"},[t("option",gt,e(s.$t("therapists.filters.highestRated")),1),t("option",ut,e(s.$t("therapists.filters.lowestPrice")),1),t("option",vt,e(s.$t("therapists.filters.highestPrice")),1),t("option",_t,e(s.$t("therapists.filters.mostAvailable")),1)],512),[[b,l.filters.sortBy]])])])]),l.loading?(p(),c("div",mt,[n[4]||(n[4]=t("svg",{class:"animate-spin h-12 w-12 text-primary-600 mx-auto mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),t("p",ft,e(s.$t("therapists.loading")),1)])):l.filteredTherapists.length>0?(p(),c("div",yt,[(p(!0),c(w,null,$(l.filteredTherapists,i=>{var _,m,f,o;return p(),c("div",{key:i.id,class:"card hover:shadow-lg transition-shadow cursor-pointer",onClick:a=>l.viewTherapist(i.id)},[t("div",wt,[t("img",{src:i.photo||"/default-therapist.svg",alt:i.name,class:k(["w-full h-48 rounded-lg",i.photo?"object-cover":"object-contain bg-gray-100 p-4"])},null,10,$t),t("div",kt,e(((_=i.price)==null?void 0:_.others)||"Contact"),1)]),t("div",xt,[t("h3",zt,e(i.name),1),t("div",Rt,[t("div",Ct,[(p(),c(w,null,$(5,a=>t("svg",{key:a,class:k(["w-4 h-4",a<=l.getAverageRating(i)?"fill-current":"fill-gray-300"]),viewBox:"0 0 20 20"},n[5]||(n[5]=[t("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"},null,-1)]),2)),64))]),t("span",Mt,e(l.getAverageRating(i).toFixed(1))+" ("+e(((m=i.diagnoses)==null?void 0:m.length)||0)+" reviews)",1)]),t("p",Bt,e(i.bio||s.$t("therapists.bioDefault")),1),t("div",Tt,[(p(!0),c(w,null,$((f=i.diagnoses)==null?void 0:f.slice(0,3),a=>(p(),c("span",{key:a.id,class:"bg-primary-100 text-primary-800 text-xs px-2 py-1 rounded-full"},e(a.name),1))),128)),((o=i.diagnoses)==null?void 0:o.length)>3?(p(),c("span",At,e(s.$t("therapists.more",{count:i.diagnoses.length-3})),1)):j("",!0)]),t("div",Vt,[n[6]||(n[6]=t("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("span",null,e(s.$t("therapists.nextAvailable",{time:i.earliest_slot||s.$t("therapists.contactForAvailability")})),1)]),t("div",Ft,[t("button",{onClick:C(a=>l.bookAppointment(i.id),["stop"]),class:"flex-1 btn-primary text-sm py-2"},e(s.$t("therapists.bookSession")),9,Nt),t("button",{onClick:C(a=>l.viewTherapist(i.id),["stop"]),class:"btn-outline text-sm py-2"},e(s.$t("therapists.viewProfile")),9,jt)])])],8,bt)}),128))])):(p(),c("div",Lt,[n[7]||(n[7]=t("svg",{class:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),t("h3",Pt,e(s.$t("therapists.noResults")),1),t("p",St,e(s.$t("therapists.noResultsMessage")),1)]))])],10,P)}const Ht=M(L,[["render",Ut],["__scopeId","data-v-9d2809cb"]]);export{Ht as default};
